# 상태 코드

### 상태코드란

클라이언트가 보낸 요청의 처리 상태를 응답으로 알려주는 기능

- 1xx: 요청이 수신되어 처리중
  - 거의 사용하지 않음

- 2xx: 요청 정상처리

- 3xx: 요청을 완료하려면 추가 행동이 필요

- 4xx: 클라이언트 오류, 잘못된 문법 등으로 서버가 요청을 수행할 수 없음

- 5xx: 서버오류, 서버가 정상 요청을 처리하지 못함



## 2XX

### 200 

- 요청 성공

### 201

- 리소스 생성 완료
- POST

### 202

- 요청이 접수되었으나 처리가 완료되지 않음
- 배치 처리같은 곳에서 사용

### 204

- No content
- 서버가 요청을 성공적으로 수행했지만 응답 페이로드 본문에 보낼 데이터가 없음
- 예) 웹 문서 편집기에서 save 버튼



## 3XX

요청을 완료하기 위해 유저 에이전트의 추가 조치 필요 (웹브라우저)

### 리다이렉션 이해

- 영구 리다이렉션
  - 특정 리소스의 URI가 영구적으로 이동
- 일시 리다이렉션
  - 주문완료 후 주문 내역 확인으로 이동
    - PRG: Post/ Redirect/Get
- 특수 리다이렉션
  - 결과 대신 캐시를 사용

### 영구 리다이렉션

- 301, 308
- 원래의 URL을 사용하지 않는다. 검색 엔진 등에서도 변경 인지
- 301: 리다이렉트 시 요청 메서드가 GET으로 변하고, 본문이 제거될 수 있음
- 308: 리다이렉트 시 요청 메서드와 본문 유지(처음 POST를 보내면 리다이렉트도 POST로 요청)

​	

### 일시적 리다이렉션

> 리소스의 URI가 '일시적'으로 변경

- 검색 엔진 등에서 URL을 변경하면 안됨

#### 302 Found

- 리다이렉트시 요청 메서드가 GET으로 변하고 본문이 제거될 수 있음(MAY)

#### 307 Temporary Redirect

- 302와 기능은 같음
- 리다이렉트시 요청 메서드와 본문 유지(요청 메서드를 변경하면 안된다./MUST NOT )

#### 303 See Other

- 302와 기능은 같음
- 리다이렉트시 요청 메서드가 GET으로 변경



### PRG: Post/ Redirect/Get

> 일시적인 리다이렉션 - 예시

- POST로 주문 후에 웹 브라우저를 새로고침하면?
- 새로고침은 다시 요청
- 중복 주문이 될 수 있다.

#### GRG 사용 시

- POST로 주문후에 새로고침으로 인한 중복 주문 방지
- POST로 주문후에 GET메서드로 리다이렉트
- 새로고침해도 결과 화면을 GET으로 조회
- 중복 주문 대신에 결과 화면만 GET으로 다시 요청



- POST 요청 시 302 Found 로 응답을 준다.



### 기타 리다이렉션

#### 300, 304

#### 304

- 캐시를 목적으로 사용
- 클라이언트가 리소스가 수정되지 않았음을 알려준다. 캐시 재사용
- 메세지 바디를 포함하면 안된다.



### 4XX 클라이언트 오류

> 클라이언트가 잘못된 요청을 해서 서버가 요청을 처리할 수 없음

> 클라이언트는 내용을 다시 검토하고 보내야함

#### 401 Unauthorized

- 인증 되지 않음
- 오류 시, 응답에 WWW-Authenticate 헤더와 함께 인증 방법을 설명

#### 403 Forbidden

- 서버가 요청을 이해했지만 승인을 거부함
- 인증 자격 증명은 있지만, 접근 권한이 맞지 않을 때

#### 404 Not Found

- 요청 리서스를 찾을 수 없음



### 5XX 서버 오류

>  서버에 문제가 있어서 발생하는 오류

#### 500 Internal Server Error

- 내부에서 발생하는 보편적인 에러는 500을 많이 사용

#### 503 Service Unavailable

> 서비스 이용 불가

- 서버가 일시적인 과부하 또는 예정된 작업으로 잠시 요청을 처리할 수 없음
- Retry-After 헤더 필드로 얼바 뒤에 복구되는지 보낼 수도 있음

 
